// =============================================================================
// 后台管理接口 - 通用消息定义
// =============================================================================
//
// 版本: v1.0
// 更新时间: 2026-02-05
// 用途: gRPC 后台管理接口的通用消息类型
//
// 本文件定义了所有 Admin 服务共用的基础消息类型：
// - ApiResponse: 通用 API 响应（用于无额外数据返回的操作）
// - Pagination: 分页请求参数
// - PageInfo: 分页响应信息
// - TimeRange: 时间范围筛选
// - Empty: 空消息
//
// =============================================================================

syntax = "proto3";

package admin;

option go_package = "github.com/agent-sapient/immigration-chat-admin-idl-go/proto/admin";



// =============================================================================
// 通用响应
// =============================================================================

// ApiResponse - 通用 API 响应
//
// 用于不需要返回额外业务数据的操作（如：激活用户、封禁用户等）
// 调用方应首先检查 code 字段判断操作是否成功
//
// 示例响应：
// - 成功: { code: 0, message: "激活成功" }
// - 失败: { code: 404, message: "用户不存在" }
// - 参数错误: { code: 400, message: "reason 参数必填" }
// - 认证失败: { code: 401, message: "缺少管理员身份信息 (x-admin-id)" }
// - 服务器错误: { code: 500, message: "内部错误: ..." }
message ApiResponse {
  // 业务状态码
  // - 0: 成功
  // - 400: 参数错误（如缺少必填字段、参数值无效）
  // - 401: 认证失败（如缺少 x-admin-id）
  // - 404: 资源不存在（如用户不存在、邀请码不存在）
  // - 500: 服务器内部错误
  int32 code = 1;
  
  // 响应消息（中文）
  // 成功时返回操作结果描述，失败时返回错误原因
  string message = 2;
}

// =============================================================================
// 分页
// =============================================================================

// Pagination - 分页请求参数
//
// 用于列表查询请求中指定分页参数
// 如不传递，默认 page=1, page_size=20
message Pagination {
  // 页码，从 1 开始
  // 默认值: 1
  // 最小值: 1
  int32 page = 1;
  
  // 每页数量
  // 默认值: 20
  // 最小值: 1
  // 最大值: 100
  int32 page_size = 2;
}

// PageInfo - 分页响应信息
//
// 用于列表查询响应中返回分页状态
// 调用方可据此计算总页数: total_pages = ceil(total / page_size)
message PageInfo {
  // 符合查询条件的总记录数
  int32 total = 1;
  
  // 当前页码（与请求参数一致）
  int32 page = 2;
  
  // 每页数量（与请求参数一致）
  int32 page_size = 3;
}

// =============================================================================
// 时间范围
// =============================================================================

// TimeRange - 时间范围筛选
//
// 用于按时间范围筛选数据（如注册时间、激活时间）
// 时间戳为 Unix 时间戳（秒），UTC 时区
//
// 注意：
// - start 和 end 均为可选，可只传其一实现"之后"或"之前"筛选
// - 边界包含：start <= time <= end
// - 如 start > end，将返回空结果
//
// 示例：
// - 查询 2026-01-01 至 2026-01-31 的数据:
//   { start: 1735689600, end: 1738367999 }
// - 查询 2026-01-01 之后的数据:
//   { start: 1735689600 }
message TimeRange {
  // 开始时间戳（秒，UTC）
  // 包含边界：time >= start
  int64 start = 1;
  
  // 结束时间戳（秒，UTC）
  // 包含边界：time <= end
  int64 end = 2;
}

// =============================================================================
// 空消息
// =============================================================================

// Empty - 空消息
//
// 用于无参数或无返回值的 RPC 方法（如：健康检查）
message Empty {}
